<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dep√≥sito - SLA Sistema de Log√≠stica e Armazenamento</title>
    <link rel="stylesheet" href="../style/deposit.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <header id="main-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon" id="logo-icon">SLA</div>
                    <h1>Sistema de <span>Log√≠stica e Armazenamento</span></h1>
                </div>
                <div class="user-info" id="user-info">
                    <span id="user-name">Usu√°rio</span>
                    <span class="user-type" id="user-type-display">Funcion√°rio</span>
                    <a href="#" class="btn btn-danger" id="logout-btn" style="padding: 0.5rem 1rem; font-size: 0.9rem;">
                        <i class="fas fa-sign-out-alt"></i>
                        Sair
                    </a>
                </div>
            </div>
        </div>
    </header>

    <section class="page">
        <div class="container">
            <!-- Dashboard do Gerente -->
            <div class="manager-dashboard" id="manager-dashboard">
                <div class="dashboard-header">
                    <div class="welcome-message">
                        <h2 id="welcome-user">Bem-vindo, Gerente!</h2>
                        <p>Painel de Controle Administrativo</p>
                    </div>
                    <div class="pdf-container">
                        <button class="btn btn-pdf" id="generate-pdf-btn">
                            <i class="fas fa-file-pdf"></i>
                            Gerar Relat√≥rio PDF
                        </button>
                    </div>
                </div>

                <div class="manager-controls">
                    <button class="control-btn active" id="btn-movimentacoes">
                        <i class="fas fa-chart-line"></i>
                        Movimenta√ß√µes
                    </button>
                    <!-- Bot√µes removidos conforme solicitado -->
                </div>

                <!-- Se√ß√£o de Movimenta√ß√µes -->
                <div class="section active" id="section-movimentacoes">
                    <!-- M√©tricas Principais -->
                    <div class="manager-metrics">
                        <div class="metric-card">
                            <div class="metric-header">
                                <div class="metric-icon">
                                    <i class="fas fa-warehouse"></i>
                                </div>
                            </div>
                            <div class="metric-value">R$ 284.5K</div>
                            <div class="metric-label">Valor Total em Estoque</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-header">
                                <div class="metric-icon">
                                    <i class="fas fa-exchange-alt"></i>
                                </div>
                            </div>
                            <div class="metric-value">3.2x</div>
                            <div class="metric-label">Giro de Estoque</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-header">
                                <div class="metric-icon">
                                    <i class="fas fa-box-open"></i>
                                </div>
                            </div>
                            <div class="metric-value">1.247</div>
                            <div class="metric-label">Itens em Estoque</div>
                        </div>
                    </div>

                    <!-- Alertas do Sistema -->
                    <div class="alerts-container">
                        <h3 style="margin-bottom: 1rem; color: var(--light);">
                            <i class="fas fa-bell"></i> Alertas do Sistema
                        </h3>
                        <div class="alert-item">
                            <div class="alert-icon">
                                <i class="fas fa-exclamation-circle"></i>
                            </div>
                            <div class="alert-content">
                                <div class="alert-title">Estoque Cr√≠tico</div>
                                <div class="alert-message">Componentes Eletr√¥nicos abaixo do n√≠vel m√≠nimo</div>
                            </div>
                            <button class="btn btn-secondary">Resolver</button>
                        </div>
                    </div>

                    <!-- Gr√°ficos -->
                    <div class="dashboard-grid">
                        <div class="chart-container">
                            <div class="chart-header">
                                <h3 class="chart-title">Movimenta√ß√µes por Categoria</h3>
                            </div>
                            <canvas id="categoryChart" height="250"></canvas>
                        </div>
                        
                        <div class="chart-container">
                            <div class="chart-header">
                                <h3 class="chart-title">Status do Estoque</h3>
                            </div>
                            <canvas id="inventoryChart" height="250"></canvas>
                        </div>
                    </div>

                    <!-- Tabela de Movimenta√ß√µes -->
                    <div class="card manager-card">
                        <h2 class="card-title manager-title">Movimenta√ß√µes Recentes</h2>
                        
                        <table class="advanced-table">
                            <thead>
                                <tr>
                                    <th>Data/Hora</th>
                                    <th>Usu√°rio</th>
                                    <th>Tipo</th>
                                    <th>Material</th>
                                    <th>Quantidade</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>15/10/2023 14:30</td>
                                    <td>Jo√£o Silva</td>
                                    <td><span class="badge badge-success"><i class="fas fa-arrow-down"></i> Entrada</span></td>
                                    <td>Ferramentas</td>
                                    <td>50</td>
                                    <td><span class="status-badge status-low">Conclu√≠do</span></td>
                                </tr>
                                <tr>
                                    <td>15/10/2023 11:15</td>
                                    <td>Maria Santos</td>
                                    <td><span class="badge badge-danger"><i class="fas fa-arrow-up"></i> Sa√≠da</span></td>
                                    <td>Componentes Eletr√¥nicos</td>
                                    <td>25</td>
                                    <td><span class="status-badge status-high">Pendente</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Se√ß√µes removidas conforme solicitado -->
            </div>

            <!-- Interface do Funcion√°rio - MELHORADA -->
            <div class="employee-dashboard" id="employee-dashboard">
                <div class="dashboard-header">
                    <div class="welcome-message">
                        <h2 id="welcome-employee">Bem-vindo, Funcion√°rio!</h2>
                        <p>Painel de Controle do Funcion√°rio</p>
                    </div>
                </div>

                <div class="employee-controls">
                    <button class="employee-control-btn" id="employee-btn-movimentacao">
                        <i class="fas fa-exchange-alt"></i>
                        Movimenta√ß√£o
                    </button>
                    <button class="employee-control-btn" id="employee-btn-manutencao">
                        <i class="fas fa-tools"></i>
                        Manuten√ß√£o
                    </button>
                </div>

                <!-- Se√ß√£o de Solicita√ß√µes do Funcion√°rio -->
                <div class="employee-section active" id="employee-section-solicitacoes">
                    <div class="employee-metrics">
                        <div class="employee-metric-card">
                            <div class="employee-metric-header">
                                <div class="employee-metric-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                            </div>
                            <div class="employee-metric-value">3</div>
                            <div class="employee-metric-label">Solicita√ß√µes Pendentes</div>
                        </div>
                        <div class="employee-metric-card">
                            <div class="employee-metric-header">
                                <div class="employee-metric-icon">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                            </div>
                            <div class="employee-metric-value">18</div>
                            <div class="employee-metric-label">Solicita√ß√µes Aprovadas</div>
                        </div>
                        <div class="employee-metric-card">
                            <div class="employee-metric-header">
                                <div class="employee-metric-icon">
                                    <i class="fas fa-tools"></i>
                                </div>
                            </div>
                            <div class="employee-metric-value">24</div>
                            <div class="employee-metric-label">Itens Solicitados</div>
                        </div>
                    </div>

                    <div class="card employee-card">
                        <h2 class="card-title employee-title">Minhas Solicita√ß√µes Recentes</h2>
                        
                        <table class="advanced-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Data</th>
                                    <th>Material</th>
                                    <th>Quantidade</th>
                                    <th>Projeto</th>
                                    <th>Status</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>#SOL-2023-001</td>
                                    <td>15/10/2023</td>
                                    <td>Ferramentas</td>
                                    <td>5</td>
                                    <td>Manuten√ß√£o Preventiva</td>
                                    <td><span class="badge badge-success">Aprovado</span></td>
                                    <td>
                                        <button class="btn btn-secondary" style="padding: 0.5rem;">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>#SOL-2023-002</td>
                                    <td>14/10/2023</td>
                                    <td>Componentes Eletr√¥nicos</td>
                                    <td>10</td>
                                    <td>Reparo de Equipamentos</td>
                                    <td><span class="badge badge-warning">Em An√°lise</span></td>
                                    <td>
                                        <button class="btn btn-secondary" style="padding: 0.5rem;">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>#SOL-2023-003</td>
                                    <td>13/10/2023</td>
                                    <td>EPI - Luvas</td>
                                    <td>2</td>
                                    <td>Seguran√ßa do Trabalho</td>
                                    <td><span class="badge badge-danger">Rejeitado</span></td>
                                    <td>
                                        <button class="btn btn-secondary" style="padding: 0.5rem;">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Se√ß√£o de Estoque do Funcion√°rio -->
                <div class="employee-section" id="employee-section-estoque">
                    <div class="card employee-card">
                        <h2 class="card-title employee-title">Consulta de Estoque</h2>
                        
                        <div class="form-group">
                            <div class="input-with-icon">
                                <i class="input-icon fas fa-search"></i>
                                <input type="text" id="employee-search-stock" placeholder="Buscar por nome do material...">
                            </div>
                        </div>

                        <div class="inventory-grid">
                            <div class="inventory-item">
                                <div class="inventory-header">
                                    <div class="inventory-icon">
                                        <i class="fas fa-tools"></i>
                                    </div>
                                </div>
                                <div class="inventory-value">850</div>
                                <div class="inventory-label">Ferramentas em Estoque</div>
                                <div class="stock-level">
                                    <div class="stock-level-fill stock-high" style="width: 85%"></div>
                                </div>
                                <div class="employee-quick-actions">
                                    <button class="employee-quick-action-btn" onclick="solicitarMaterial('Ferramentas')">
                                        <i class="fas fa-cart-plus"></i> Solicitar
                                    </button>
                                </div>
                            </div>

                            <div class="inventory-item">
                                <div class="inventory-header">
                                    <div class="inventory-icon">
                                        <i class="fas fa-microchip"></i>
                                    </div>
                                </div>
                                <div class="inventory-value">45</div>
                                <div class="inventory-label">Componentes Eletr√¥nicos</div>
                                <div class="stock-level">
                                    <div class="stock-level-fill stock-low" style="width: 15%"></div>
                                </div>
                                <div class="employee-quick-actions">
                                    <button class="employee-quick-action-btn" onclick="solicitarMaterial('Componentes Eletr√¥nicos')">
                                        <i class="fas fa-cart-plus"></i> Solicitar
                                    </button>
                                </div>
                            </div>

                            <div class="inventory-item">
                                <div class="inventory-header">
                                    <div class="inventory-icon">
                                        <i class="fas fa-print"></i>
                                    </div>
                                </div>
                                <div class="inventory-value">320</div>
                                <div class="inventory-label">Materiais de Escrit√≥rio</div>
                                <div class="stock-level">
                                    <div class="stock-level-fill stock-medium" style="width: 65%"></div>
                                </div>
                                <div class="employee-quick-actions">
                                    <button class="employee-quick-action-btn" onclick="solicitarMaterial('Materiais de Escrit√≥rio')">
                                        <i class="fas fa-cart-plus"></i> Solicitar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Se√ß√£o de Movimenta√ß√£o do Funcion√°rio -->
                <div class="employee-section" id="employee-section-movimentacao">
                    <div class="employee-metrics">
                        <div class="employee-metric-card">
                            <div class="employee-metric-header">
                                <div class="employee-metric-icon">
                                    <i class="fas fa-arrow-down"></i>
                                </div>
                            </div>
                            <div class="employee-metric-value">12</div>
                            <div class="employee-metric-label">Entradas Este M√™s</div>
                        </div>
                        <div class="employee-metric-card">
                            <div class="employee-metric-header">
                                <div class="employee-metric-icon">
                                    <i class="fas fa-arrow-up"></i>
                                </div>
                            </div>
                            <div class="employee-metric-value">8</div>
                            <div class="employee-metric-label">Sa√≠das Este M√™s</div>
                        </div>
                        <div class="employee-metric-card">
                            <div class="employee-metric-header">
                                <div class="employee-metric-icon">
                                    <i class="fas fa-box"></i>
                                </div>
                            </div>
                            <div class="employee-metric-value">47</div>
                            <div class="employee-metric-label">Itens Movimentados</div>
                        </div>
                    </div>

                    <div class="card employee-card">
                        <h2 class="card-title employee-title">Movimenta√ß√£o de Materiais</h2>
                        
                        <div class="transaction-type">
                            <button class="btn active" id="employee-deposit-btn">
                                <i class="fas fa-boxes"></i>
                                <span>Entrada de Material</span>
                            </button>
                            <button class="btn btn-secondary" id="employee-withdrawal-btn">
                                <i class="fas fa-dolly"></i>
                                <span>Retirada de Material</span>
                            </button>
                        </div>
                        
                        <form id="employee-transaction-form">
                            <div class="transaction-form">
                                <div class="form-group">
                                    <label for="employee-transaction-material">Material</label>
                                    <div class="input-with-icon">
                                        <i class="input-icon fas fa-box"></i>
                                        <select id="employee-transaction-material" required>
                                            <option value="">Selecione um material</option>
                                            <option value="ferramentas">Ferramentas</option>
                                            <option value="eletronicos">Componentes Eletr√¥nicos</option>
                                            <option value="materiais-escritorio">Materiais de Escrit√≥rio</option>
                                            <option value="epi">Equipamentos de Prote√ß√£o</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="employee-transaction-quantity">Quantidade</label>
                                    <div class="input-with-icon">
                                        <i class="input-icon fas fa-hashtag"></i>
                                        <input type="number" id="employee-transaction-quantity" min="1" placeholder="Digite a quantidade" required>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="employee-transaction-location">Localiza√ß√£o</label>
                                    <div class="input-with-icon">
                                        <i class="input-icon fas fa-map-marker-alt"></i>
                                        <select id="employee-transaction-location" required>
                                            <option value="">Selecione uma localiza√ß√£o</option>
                                            <option value="almoxarifado-a">Almoxarifado A</option>
                                            <option value="almoxarifado-b">Almoxarifado B</option>
                                            <option value="setor-producao">Setor de Produ√ß√£o</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="employee-transaction-project">Projeto/Atividade</label>
                                    <div class="input-with-icon">
                                        <i class="input-icon fas fa-project-diagram"></i>
                                        <input type="text" id="employee-transaction-project" placeholder="Nome do projeto ou atividade" required>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="employee-transaction-priority">Prioridade</label>
                                    <div class="input-with-icon">
                                        <i class="input-icon fas fa-flag"></i>
                                        <select id="employee-transaction-priority" required>
                                            <option value="baixa">Baixa</option>
                                            <option value="media">M√©dia</option>
                                            <option value="alta">Alta</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group full-width">
                                    <label for="employee-transaction-notes">Observa√ß√µes</label>
                                    <div class="input-with-icon">
                                        <i class="input-icon fas fa-sticky-note"></i>
                                        <textarea id="employee-transaction-notes" rows="3" placeholder="Adicione observa√ß√µes se necess√°rio"></textarea>
                                    </div>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn btn-block btn-success" id="employee-transaction-submit-btn">
                                <i class="fas fa-check-circle"></i>
                                <span>Registrar Entrada</span>
                            </button>
                        </form>
                    </div>

                    <div class="card employee-card">
                        <h2 class="card-title employee-title">Minhas Movimenta√ß√µes Recentes</h2>
                        
                        <table class="advanced-table">
                            <thead>
                                <tr>
                                    <th>Data/Hora</th>
                                    <th>Tipo</th>
                                    <th>Material</th>
                                    <th>Quantidade</th>
                                    <th>Localiza√ß√£o</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>15/10/2023 14:30</td>
                                    <td><span class="badge badge-success"><i class="fas fa-arrow-down"></i> Entrada</span></td>
                                    <td>Ferramentas</td>
                                    <td>5</td>
                                    <td>Almoxarifado A</td>
                                    <td><span class="status-badge status-low">Conclu√≠do</span></td>
                                </tr>
                                <tr>
                                    <td>15/10/2023 11:15</td>
                                    <td><span class="badge badge-danger"><i class="fas fa-arrow-up"></i> Sa√≠da</span></td>
                                    <td>Componentes Eletr√¥nicos</td>
                                    <td>10</td>
                                    <td>Setor de Produ√ß√£o</td>
                                    <td><span class="status-badge status-high">Pendente</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Se√ß√£o de Manuten√ß√£o do Funcion√°rio -->
                <div class="employee-section" id="employee-section-manutencao">
                    <div class="employee-metrics">
                        <div class="employee-metric-card">
                            <div class="employee-metric-header">
                                <div class="employee-metric-icon">
                                    <i class="fas fa-tools"></i>
                                </div>
                            </div>
                            <div class="employee-metric-value">5</div>
                            <div class="employee-metric-label">Solicita√ß√µes de Manuten√ß√£o</div>
                        </div>
                        <div class="employee-metric-card">
                            <div class="employee-metric-header">
                                <div class="employee-metric-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                            </div>
                            <div class="employee-metric-value">2</div>
                            <div class="employee-metric-label">Em Andamento</div>
                        </div>
                        <div class="employee-metric-card">
                            <div class="employee-metric-header">
                                <div class="employee-metric-icon">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                            </div>
                            <div class="employee-metric-value">18</div>
                            <div class="employee-metric-label">Conclu√≠das</div>
                        </div>
                    </div>

                    <div class="maintenance-grid">
                        <div class="maintenance-card">
                            <div class="maintenance-header">
                                <div class="maintenance-icon">
                                    <i class="fas fa-warehouse"></i>
                                </div>
                            </div>
                            <div class="maintenance-value">2</div>
                            <div class="maintenance-label">Equipamentos Cr√≠ticos</div>
                            <div class="progress-bar">
                                <div class="progress-fill progress-high"></div>
                            </div>
                            <div class="employee-quick-actions">
                                <button class="employee-quick-action-btn" onclick="solicitarManutencao('Equipamentos Cr√≠ticos')">
                                    <i class="fas fa-wrench"></i> Solicitar
                                </button>
                            </div>
                        </div>

                        <div class="maintenance-card">
                            <div class="maintenance-header">
                                <div class="maintenance-icon">
                                    <i class="fas fa-truck"></i>
                                </div>
                            </div>
                            <div class="maintenance-value">3</div>
                            <div class="maintenance-label">Ve√≠culos em Manuten√ß√£o</div>
                            <div class="progress-bar">
                                <div class="progress-fill progress-medium"></div>
                            </div>
                            <div class="employee-quick-actions">
                                <button class="employee-quick-action-btn" onclick="solicitarManutencao('Ve√≠culos')">
                                    <i class="fas fa-calendar"></i> Agendar
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="card employee-card">
                        <h2 class="card-title employee-title">Minhas Solicita√ß√µes de Manuten√ß√£o</h2>
                        
                        <table class="advanced-table">
                            <thead>
                                <tr>
                                    <th>OS #</th>
                                    <th>Equipamento</th>
                                    <th>Tipo</th>
                                    <th>Data</th>
                                    <th>Prioridade</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>OS-2023-015</td>
                                    <td>Empilhadeira El√©trica</td>
                                    <td>Corretiva</td>
                                    <td>15/10/2023</td>
                                    <td><span class="badge badge-danger">Alta</span></td>
                                    <td><span class="status-badge status-high">Pendente</span></td>
                                </tr>
                                <tr>
                                    <td>OS-2023-014</td>
                                    <td>Esteira Transportadora</td>
                                    <td>Preventiva</td>
                                    <td>12/10/2023</td>
                                    <td><span class="badge badge-warning">M√©dia</span></td>
                                    <td><span class="status-badge status-low">Conclu√≠do</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="card employee-card">
                        <h2 class="card-title employee-title">Nova Solicita√ß√£o de Manuten√ß√£o</h2>
                        
                        <form id="employee-maintenance-form">
                            <div class="transaction-form">
                                <div class="form-group">
                                    <label for="employee-maintenance-equipment">Equipamento</label>
                                    <div class="input-with-icon">
                                        <i class="input-icon fas fa-toolbox"></i>
                                        <select id="employee-maintenance-equipment" required>
                                            <option value="">Selecione o equipamento</option>
                                            <option value="empilhadeira">Empilhadeira El√©trica</option>
                                            <option value="esteira">Esteira Transportadora</option>
                                            <option value="refrigeracao">Sistema de Refrigera√ß√£o</option>
                                            <option value="computador">Computador</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="employee-maintenance-type">Tipo de Manuten√ß√£o</label>
                                    <div class="input-with-icon">
                                        <i class="input-icon fas fa-wrench"></i>
                                        <select id="employee-maintenance-type" required>
                                            <option value="preventiva">Preventiva</option>
                                            <option value="corretiva">Corretiva</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="employee-maintenance-priority">Prioridade</label>
                                    <div class="input-with-icon">
                                        <i class="input-icon fas fa-flag"></i>
                                        <select id="employee-maintenance-priority" required>
                                            <option value="baixa">Baixa</option>
                                            <option value="media">M√©dia</option>
                                            <option value="alta">Alta</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-group full-width">
                                    <label for="employee-maintenance-description">Descri√ß√£o do Problema</label>
                                    <div class="input-with-icon">
                                        <i class="input-icon fas fa-sticky-note"></i>
                                        <textarea id="employee-maintenance-description" rows="3" placeholder="Descreva o problema ou servi√ßo necess√°rio" required></textarea>
                                    </div>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn btn-block btn-warning">
                                <i class="fas fa-tools"></i>
                                <span>Solicitar Manuten√ß√£o</span>
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Se√ß√£o de Nova Solicita√ß√£o -->
                <div class="employee-section" id="employee-section-nova-solicitacao">
                    <div class="card employee-card">
                        <h2 class="card-title employee-title">Nova Solicita√ß√£o de Material</h2>
                        
                        <form id="employee-request-form">
                            <div class="transaction-form">
                                <div class="form-group">
                                    <label for="employee-material">Material Solicitado</label>
                                    <div class="input-with-icon">
                                        <i class="input-icon fas fa-box"></i>
                                        <select id="employee-material" required>
                                            <option value="">Selecione um material</option>
                                            <option value="ferramentas">Ferramentas</option>
                                            <option value="eletronicos">Componentes Eletr√¥nicos</option>
                                            <option value="materiais-escritorio">Materiais de Escrit√≥rio</option>
                                            <option value="epi">Equipamentos de Prote√ß√£o</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="employee-quantity">Quantidade</label>
                                    <div class="input-with-icon">
                                        <i class="input-icon fas fa-hashtag"></i>
                                        <input type="number" id="employee-quantity" min="1" placeholder="Digite a quantidade" required>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="employee-project">Projeto/Atividade</label>
                                    <div class="input-with-icon">
                                        <i class="input-icon fas fa-project-diagram"></i>
                                        <input type="text" id="employee-project" placeholder="Nome do projeto ou atividade" required>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="employee-urgency">Urg√™ncia</label>
                                    <div class="input-with-icon">
                                        <i class="input-icon fas fa-exclamation-triangle"></i>
                                        <select id="employee-urgency" required>
                                            <option value="baixa">Baixa</option>
                                            <option value="media">M√©dia</option>
                                            <option value="alta">Alta</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group full-width">
                                    <label for="employee-justification">Justificativa</label>
                                    <div class="input-with-icon">
                                        <i class="input-icon fas fa-sticky-note"></i>
                                        <textarea id="employee-justification" rows="3" placeholder="Explique a necessidade deste material" required></textarea>
                                    </div>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn btn-block btn-success">
                                <i class="fas fa-paper-plane"></i>
                                <span>Enviar Solicita√ß√£o</span>
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Interface B√°sica do Funcion√°rio (Fallback) -->
            <div class="employee-interface" id="employee-interface">
                <div class="card">
                    <h2 class="card-title">Interface do Funcion√°rio</h2>
                    <p style="text-align: center; color: var(--text-secondary); margin-bottom: 2rem;">
                        Esta √© a interface do funcion√°rio. Fa√ßa login como gerente para acessar o dashboard administrativo.
                    </p>
                    <div style="text-align: center;">
                        <button class="btn btn-success" onclick="location.reload()">
                            <i class="fas fa-sync-alt"></i>
                            Recarregar P√°gina
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // VERIFICAR LOGIN E CONFIGURAR INTERFACE
        document.addEventListener('DOMContentLoaded', function() {
            console.log('=== VERIFICANDO LOGIN ===');
            
            // Para teste, defina manualmente no console:
            // localStorage.setItem('loggedIn', 'true');
            // localStorage.setItem('userType', 'employee'); // ou 'manager'
            // localStorage.setItem('username', 'Jo√£o Silva');
            
            if (localStorage.getItem('loggedIn') !== 'true') {
                alert('‚ö†Ô∏è Voc√™ precisa fazer login primeiro!');
                window.location.href = 'login.html';
                return;
            }

            const username = localStorage.getItem('username') || 'Usu√°rio';
            const userType = localStorage.getItem('userType') || 'employee';

            console.log('Configurando interface para:', username, 'tipo:', userType);

            // Atualizar informa√ß√µes do usu√°rio
            document.getElementById('user-name').textContent = username;
            
            const userTypeDisplay = userType === 'manager' ? 'Gerente' : 'Funcion√°rio';
            document.getElementById('user-type-display').textContent = userTypeDisplay;
            document.getElementById('welcome-user').textContent = `Bem-vindo, ${username}!`;
            document.getElementById('welcome-employee').textContent = `Bem-vindo, ${username}!`;

            // Configurar interface baseada no tipo de usu√°rio
            if (userType === 'manager') {
                console.log('üéØ Ativando modo GERENTE');
                activateManagerMode();
                initializeManagerCharts();
                setupManagerEventListeners();
            } else {
                console.log('üë§ Ativando modo FUNCION√ÅRIO');
                activateEmployeeMode();
            }

            setupCommonEventListeners();
        });

        function activateManagerMode() {
            const header = document.getElementById('main-header');
            const logoIcon = document.getElementById('logo-icon');
            const userInfo = document.getElementById('user-info');
            const userTypeDisplay = document.getElementById('user-type-display');
            
            header.classList.add('manager-mode');
            logoIcon.classList.add('manager');
            userInfo.classList.add('manager');
            userTypeDisplay.classList.add('manager');
            
            document.getElementById('manager-dashboard').style.display = 'block';
            document.getElementById('employee-dashboard').style.display = 'none';
            document.getElementById('employee-interface').style.display = 'none';
            
            console.log('‚úÖ Modo gerente ativado com sucesso!');
        }

        function activateEmployeeMode() {
            const header = document.getElementById('main-header');
            const logoIcon = document.getElementById('logo-icon');
            const userInfo = document.getElementById('user-info');
            const userTypeDisplay = document.getElementById('user-type-display');
            
            header.classList.add('employee-mode');
            logoIcon.classList.add('employee');
            userInfo.classList.add('employee');
            userTypeDisplay.classList.add('employee');
            
            document.getElementById('manager-dashboard').style.display = 'none';
            document.getElementById('employee-dashboard').style.display = 'block';
            document.getElementById('employee-interface').style.display = 'none';
            
            setupEmployeeEventListeners();
            console.log('‚úÖ Modo funcion√°rio ativado com sucesso!');
        }

        function initializeManagerCharts() {
            // Gr√°fico de movimenta√ß√µes por categoria
            const categoryCtx = document.getElementById('categoryChart').getContext('2d');
            if (categoryCtx) {
                new Chart(categoryCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Ferramentas', 'Eletr√¥nicos', 'Escrit√≥rio', 'Equipamentos'],
                        datasets: [{
                            label: 'Entradas',
                            data: [65, 59, 80, 81],
                            backgroundColor: 'rgba(59, 130, 246, 0.8)',
                        }, {
                            label: 'Sa√≠das',
                            data: [28, 48, 40, 19],
                            backgroundColor: 'rgba(239, 68, 68, 0.8)',
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'top',
                            }
                        }
                    }
                });
            }

            // Gr√°fico de status do estoque
            const inventoryCtx = document.getElementById('inventoryChart').getContext('2d');
            if (inventoryCtx) {
                new Chart(inventoryCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Normal', 'Aten√ß√£o', 'Cr√≠tico'],
                        datasets: [{
                            data: [65, 25, 10],
                            backgroundColor: [
                                'rgba(16, 185, 129, 0.8)',
                                'rgba(245, 158, 11, 0.8)',
                                'rgba(239, 68, 68, 0.8)'
                            ],
                        }]
                    }
                });
            }
        }

        function setupManagerEventListeners() {
            // Controles do dashboard do gerente
            document.getElementById('btn-movimentacoes').addEventListener('click', function() {
                switchSection('movimentacoes');
            });

            // Bot√µes de transa√ß√£o do gerente
            document.getElementById('manager-deposit-btn').addEventListener('click', function() {
                setManagerTransactionType('deposit');
            });
            
            document.getElementById('manager-withdrawal-btn').addEventListener('click', function() {
                setManagerTransactionType('withdrawal');
            });

            // Formul√°rio de transa√ß√£o do gerente
            document.getElementById('manager-transaction-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const material = document.getElementById('manager-material').value;
                const quantity = document.getElementById('manager-quantity').value;
                const location = document.getElementById('manager-location').value;
                const responsible = document.getElementById('manager-responsible').value;
                const priority = document.getElementById('manager-priority').value;
                const cost = document.getElementById('manager-cost').value;
                
                if (!material || !quantity || !location || !responsible || !cost) {
                    alert('Por favor, preencha todos os campos obrigat√≥rios!');
                    return;
                }
                
                const transactionType = document.getElementById('manager-deposit-btn').classList.contains('active') ? 'Entrada' : 'Retirada';
                const totalCost = (quantity * cost).toFixed(2);
                
                alert(`‚úÖ ${transactionType} de material registrada com sucesso!\n\nMaterial: ${material}\nQuantidade: ${quantity}\nCusto Total: R$ ${totalCost}\nPrioridade: ${priority.toUpperCase()}`);
                this.reset();
            });

            // Formul√°rio de manuten√ß√£o do gerente
            document.getElementById('maintenance-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const equipment = document.getElementById('maintenance-equipment').value;
                const type = document.getElementById('maintenance-type').value;
                const priority = document.getElementById('maintenance-priority').value;
                const description = document.getElementById('maintenance-description').value;
                
                if (!equipment || !type || !priority || !description) {
                    alert('Por favor, preencha todos os campos obrigat√≥rios!');
                    return;
                }
                
                alert(`‚úÖ Ordem de Servi√ßo criada com sucesso!\n\nEquipamento: ${equipment}\nTipo: ${type}\nPrioridade: ${priority.toUpperCase()}`);
                this.reset();
            });

            // Bot√£o de gerar PDF
            document.getElementById('generate-pdf-btn').addEventListener('click', function() {
                generatePDF();
            });
        }

        function setupEmployeeEventListeners() {
            // Controles do dashboard do funcion√°rio

            document.getElementById('employee-btn-movimentacao').addEventListener('click', function() {
                switchEmployeeSection('movimentacao');
            });

            document.getElementById('employee-btn-manutencao').addEventListener('click', function() {
                switchEmployeeSection('manutencao');
            });

            // Bot√µes de transa√ß√£o do funcion√°rio
            document.getElementById('employee-deposit-btn').addEventListener('click', function() {
                setEmployeeTransactionType('deposit');
            });
            
            document.getElementById('employee-withdrawal-btn').addEventListener('click', function() {
                setEmployeeTransactionType('withdrawal');
            });

            // Formul√°rio de transa√ß√£o do funcion√°rio
            document.getElementById('employee-transaction-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const material = document.getElementById('employee-transaction-material').value;
                const quantity = document.getElementById('employee-transaction-quantity').value;
                const location = document.getElementById('employee-transaction-location').value;
                const project = document.getElementById('employee-transaction-project').value;
                const priority = document.getElementById('employee-transaction-priority').value;
                
                if (!material || !quantity || !location || !project) {
                    alert('Por favor, preencha todos os campos obrigat√≥rios!');
                    return;
                }
                
                const transactionType = document.getElementById('employee-deposit-btn').classList.contains('active') ? 'Entrada' : 'Retirada';
                
                alert(`‚úÖ ${transactionType} de material registrada com sucesso!\n\nMaterial: ${material}\nQuantidade: ${quantity}\nProjeto: ${project}\nPrioridade: ${priority.toUpperCase()}`);
                this.reset();
            });

            // Formul√°rio de manuten√ß√£o do funcion√°rio
            document.getElementById('employee-maintenance-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const equipment = document.getElementById('employee-maintenance-equipment').value;
                const type = document.getElementById('employee-maintenance-type').value;
                const priority = document.getElementById('employee-maintenance-priority').value;
                const description = document.getElementById('employee-maintenance-description').value;
                
                if (!equipment || !type || !priority || !description) {
                    alert('Por favor, preencha todos os campos obrigat√≥rios!');
                    return;
                }
                
                alert(`‚úÖ Solicita√ß√£o de manuten√ß√£o enviada com sucesso!\n\nEquipamento: ${equipment}\nTipo: ${type}\nPrioridade: ${priority.toUpperCase()}`);
                this.reset();
            });

            // Formul√°rio de solicita√ß√£o do funcion√°rio
            document.getElementById('employee-request-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const material = document.getElementById('employee-material').value;
                const quantity = document.getElementById('employee-quantity').value;
                const project = document.getElementById('employee-project').value;
                const urgency = document.getElementById('employee-urgency').value;
                const justification = document.getElementById('employee-justification').value;
                
                if (!material || !quantity || !project || !justification) {
                    alert('Por favor, preencha todos os campos obrigat√≥rios!');
                    return;
                }
                
                alert(`‚úÖ Solicita√ß√£o enviada com sucesso!\n\nMaterial: ${material}\nQuantidade: ${quantity}\nProjeto: ${project}\nUrg√™ncia: ${urgency.toUpperCase()}`);
                this.reset();
            });

            // Busca no estoque
            document.getElementById('employee-search-stock').addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                const inventoryItems = document.querySelectorAll('.inventory-item');
                
                inventoryItems.forEach(item => {
                    const label = item.querySelector('.inventory-label').textContent.toLowerCase();
                    if (label.includes(searchTerm)) {
                        item.style.display = 'block';
                    } else {
                        item.style.display = 'none';
                    }
                });
            });
        }

        function setupCommonEventListeners() {
            // Logout
            document.getElementById('logout-btn').addEventListener('click', function(e) {
                e.preventDefault();
                localStorage.clear();
                window.location.href = 'login.html';
            });
        }

        function switchSection(sectionName) {
            // Desativar todas as se√ß√µes
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Desativar todos os bot√µes
            document.querySelectorAll('.control-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Ativar se√ß√£o e bot√£o correspondentes
            document.getElementById(`section-${sectionName}`).classList.add('active');
            document.getElementById(`btn-${sectionName}`).classList.add('active');
        }

        function switchEmployeeSection(sectionName) {
            // Desativar todas as se√ß√µes
            document.querySelectorAll('.employee-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Desativar todos os bot√µes
            document.querySelectorAll('.employee-control-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Ativar se√ß√£o e bot√£o correspondentes
            document.getElementById(`employee-section-${sectionName}`).classList.add('active');
            document.getElementById(`employee-btn-${sectionName}`).classList.add('active');
        }

        function setManagerTransactionType(type) {
            const depositBtn = document.getElementById('manager-deposit-btn');
            const withdrawalBtn = document.getElementById('manager-withdrawal-btn');
            const submitBtn = document.getElementById('manager-submit-btn');
            
            if (type === 'deposit') {
                depositBtn.classList.remove('btn-secondary');
                depositBtn.classList.add('active');
                withdrawalBtn.classList.remove('active');
                withdrawalBtn.classList.add('btn-secondary');
                submitBtn.innerHTML = '<i class="fas fa-check-circle"></i><span>Registrar Entrada</span>';
                submitBtn.className = 'btn btn-block btn-success';
            } else {
                depositBtn.classList.remove('active');
                depositBtn.classList.add('btn-secondary');
                withdrawalBtn.classList.remove('btn-secondary');
                withdrawalBtn.classList.add('active');
                submitBtn.innerHTML = '<i class="fas fa-check-circle"></i><span>Registrar Retirada</span>';
                submitBtn.className = 'btn btn-block btn-danger';
            }
        }

        function setEmployeeTransactionType(type) {
            const depositBtn = document.getElementById('employee-deposit-btn');
            const withdrawalBtn = document.getElementById('employee-withdrawal-btn');
            const submitBtn = document.getElementById('employee-transaction-submit-btn');
            
            if (type === 'deposit') {
                depositBtn.classList.remove('btn-secondary');
                depositBtn.classList.add('active');
                withdrawalBtn.classList.remove('active');
                withdrawalBtn.classList.add('btn-secondary');
                submitBtn.innerHTML = '<i class="fas fa-check-circle"></i><span>Registrar Entrada</span>';
                submitBtn.className = 'btn btn-block btn-success';
            } else {
                depositBtn.classList.remove('active');
                depositBtn.classList.add('btn-secondary');
                withdrawalBtn.classList.remove('btn-secondary');
                withdrawalBtn.classList.add('active');
                submitBtn.innerHTML = '<i class="fas fa-check-circle"></i><span>Registrar Retirada</span>';
                submitBtn.className = 'btn btn-block btn-danger';
            }
        }

        function solicitarMaterial(material) {
            document.getElementById('employee-material').value = material;
            document.getElementById('employee-quantity').value = 1;
            switchEmployeeSection('nova-solicitacao');
            document.getElementById('employee-justification').focus();
        }

        function solicitarManutencao(tipo) {
            document.getElementById('employee-maintenance-equipment').value = tipo.toLowerCase();
            document.getElementById('employee-maintenance-priority').value = 'alta';
            switchEmployeeSection('manutencao');
            document.getElementById('employee-maintenance-description').focus();
        }

        // Fun√ß√£o para gerar PDF
        function generatePDF() {
            // Verificar se jsPDF est√° dispon√≠vel
            if (typeof window.jspdf !== 'undefined') {
                const { jsPDF } = window.jspdf;
                
                // Criar um novo documento PDF
                const doc = new jsPDF();
                
                // Adicionar t√≠tulo
                doc.setFontSize(20);
                doc.setTextColor(40, 40, 40);
                doc.text('Relat√≥rio do Sistema de Log√≠stica', 20, 30);
                
                // Adicionar data e hora
                const now = new Date();
                const dateTime = now.toLocaleString('pt-BR');
                doc.setFontSize(12);
                doc.setTextColor(100, 100, 100);
                doc.text(`Gerado em: ${dateTime}`, 20, 45);
                
                // Adicionar informa√ß√µes do usu√°rio
                const username = localStorage.getItem('username') || 'Usu√°rio';
                doc.text(`Gerado por: ${username}`, 20, 55);
                
                // Adicionar m√©tricas principais
                doc.setFontSize(16);
                doc.setTextColor(40, 40, 40);
                doc.text('M√©tricas Principais', 20, 75);
                
                doc.setFontSize(12);
                doc.text(`‚Ä¢ Valor Total em Estoque: R$ 284.500,00`, 25, 90);
                doc.text(`‚Ä¢ Giro de Estoque: 3.2x`, 25, 100);
                doc.text(`‚Ä¢ Itens em Estoque: 1.247`, 25, 110);
                doc.text(`‚Ä¢ Solicita√ß√µes de Manuten√ß√£o: 12`, 25, 120);
                
                // Adicionar alertas
                doc.setFontSize(16);
                doc.setTextColor(40, 40, 40);
                doc.text('Alertas do Sistema', 20, 140);
                
                doc.setFontSize(12);
                doc.setTextColor(220, 50, 50);
                doc.text(`‚Ä¢ Estoque Cr√≠tico: Componentes Eletr√¥nicos abaixo do n√≠vel m√≠nimo`, 25, 155);
                
                // Adicionar movimenta√ß√µes recentes
                doc.setFontSize(16);
                doc.setTextColor(40, 40, 40);
                doc.text('Movimenta√ß√µes Recentes', 20, 175);
                
                doc.setFontSize(10);
                doc.setTextColor(40, 40, 40);
                doc.text('Data/Hora', 25, 190);
                doc.text('Usu√°rio', 60, 190);
                doc.text('Tipo', 90, 190);
                doc.text('Material', 115, 190);
                doc.text('Quantidade', 150, 190);
                doc.text('Status', 175, 190);
                
                // Linha divis√≥ria
                doc.line(20, 195, 190, 195);
                
                // Dados da tabela
                doc.text('15/10/2023 14:30', 25, 205);
                doc.text('Jo√£o Silva', 60, 205);
                doc.setTextColor(0, 150, 0);
                doc.text('Entrada', 90, 205);
                doc.setTextColor(40, 40, 40);
                doc.text('Ferramentas', 115, 205);
                doc.text('50', 150, 205);
                doc.setTextColor(0, 150, 0);
                doc.text('Conclu√≠do', 175, 205);
                
                doc.setTextColor(40, 40, 40);
                doc.text('15/10/2023 11:15', 25, 215);
                doc.text('Maria Santos', 60, 215);
                doc.setTextColor(220, 50, 50);
                doc.text('Sa√≠da', 90, 215);
                doc.setTextColor(40, 40, 40);
                doc.text('Componentes Eletr√¥nicos', 115, 215);
                doc.text('25', 150, 215);
                doc.setTextColor(220, 50, 50);
                doc.text('Pendente', 175, 215);
                
                // Adicionar rodap√©
                doc.setFontSize(10);
                doc.setTextColor(100, 100, 100);
                doc.text('SLA - Sistema de Log√≠stica e Armazenamento', 105, 280, null, null, 'right');
                
                // Salvar o PDF
                doc.save('relatorio_sistema_logistica.pdf');
                
                alert('‚úÖ Relat√≥rio PDF gerado com sucesso!');
            } else {
                alert('‚ùå Erro ao gerar PDF. A biblioteca jsPDF n√£o est√° dispon√≠vel.');
            }
        }
    </script>
</body>
</html>